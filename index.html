<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NIFTY / BANKNIFTY AI Trade Plan</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: white;
  text-align: center;
}
h2 { margin: 14px 0; }

button, select, input {
  width: 90%;
  max-width: 320px;
  padding: 14px;
  margin: 8px auto;
  font-size: 16px;
  border-radius: 10px;
  border: none;
}

button {
  background: #2563eb;
  color: white;
}
button:active { background:#1d4ed8; }

.card {
  background:#1e293b;
  margin:15px;
  padding:16px;
  border-radius:14px;
  max-width:420px;
  margin-left:auto;
  margin-right:auto;
  text-align:left;
}

.green { color:#22c55e; }
.red { color:#ef4444; }
.yellow { color:#facc15; }
.small { font-size:13px; opacity:0.8; }
</style>
</head>

<body>

<h2>ðŸ“Š NIFTY / BANKNIFTY AI</h2>

<!-- OPEN TRADINGVIEW -->
<button onclick="openChart('NIFTY')">Open NIFTY Live Chart</button>
<button onclick="openChart('BANKNIFTY')">Open BANKNIFTY Live Chart</button>

<!-- USER INPUT -->
<div class="card">
<h3>ðŸ§  Market Input</h3>

<select id="market">
  <option value="NIFTY">NIFTY</option>
  <option value="BANKNIFTY">BANKNIFTY</option>
</select>

<select id="bias">
  <option value="BULLISH">Bullish</option>
  <option value="BEARISH">Bearish</option>
  <option value="SIDEWAYS">Sideways</option>
</select>

<input type="number" id="spot" placeholder="Enter current index price (e.g. 22540)">

<button onclick="generatePlan()">Generate Trade Plan</button>
</div>

<!-- AI OUTPUT -->
<div class="card">
<h3>ðŸ¤– AI Trade Plan</h3>

<p>Market: <b id="o_market">--</b></p>
<p>Bias: <b id="o_bias">--</b></p>
<p>Strike: <b id="o_strike">--</b></p>
<p>Action: <b id="o_action">--</b></p>
<p>Entry: <b id="o_entry">--</b></p>
<p>Stop Loss: <b id="o_sl">--</b></p>
<p>Target: <b id="o_target">--</b></p>
<p>Confidence: <b id="o_conf">--%</b></p>

<p class="small" id="o_reason"></p>
</div>

<p class="small">Educational & decision-support only</p>

<script>
function openChart(type){
  const url = type==="NIFTY"
    ? "https://www.tradingview.com/chart/?symbol=NSE:NIFTY"
    : "https://www.tradingview.com/chart/?symbol=NSE:BANKNIFTY";
  window.open(url,'_blank');
}

function roundStrike(price, step){
  return Math.round(price / step) * step;
}

function generatePlan(){
  const market = document.getElementById("market").value;
  const bias = document.getElementById("bias").value;
  const spot = parseFloat(document.getElementById("spot").value);

  if(!spot || bias==="SIDEWAYS"){
    document.getElementById("o_reason").innerText =
      "Sideways or invalid price â€“ best action is to WAIT.";
    return;
  }

  const step = market==="NIFTY" ? 50 : 100;
  const atm = roundStrike(spot, step);

  let strike, action, entry, sl, target, conf, reason;

  if(bias==="BULLISH"){
    strike = atm + " CE";
    action = "BUY";
    entry = "Above " + atm;
    sl = (atm - step) + " (Index)";
    target = (atm + step*2) + " (Index)";
    conf = 80;
    reason = "Bullish bias + ATM call offers best risk-reward.";
  } else {
    strike = atm + " PE";
    action = "BUY";
    entry = "Below " + atm;
    sl = (atm + step) + " (Index)";
    target = (atm - step*2) + " (Index)";
    conf = 80;
    reason = "Bearish bias + ATM put offers best risk-reward.";
  }

  document.getElementById("o_market").innerText = market;
  document.getElementById("o_bias").innerText = bias;
  document.getElementById("o_strike").innerText = strike;
  document.getElementById("o_action").innerText = action;
  document.getElementById("o_entry").innerText = entry;
  document.getElementById("o_sl").innerText = sl;
  document.getElementById("o_target").innerText = target;
  document.getElementById("o_conf").innerText = conf + "%";
  document.getElementById("o_reason").innerText = reason;
}
</script>

</body>
</html>
